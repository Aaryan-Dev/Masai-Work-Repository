<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SignUp Library</title>
  </head>

  <link rel="stylesheet" href="index.css" />

  <body>
    <div id="navbar">
      <a href="#">Sign up</a>
      <a href="./login/login.html">Log in</a>
      <a href="./book/book.html">Books</a>
      <a href="../borrowed/borrowed.html">Borrowed Books </a>
    </div>

    <form id="form" onsubmit="login()">
      <p>Sign up :-</p>

      <input id="user" type="text" placeholder="Username" />
      <input id="email" type="email" placeholder="Email" />
      <input id="password" type="password" placeholder="Password" />
      <input type="submit" value="submit" />
    </form>
  </body>
</html>

<script>
  // const login = () => {
  //   const login_data = {
  //     email: document.querySelector("#email").value,
  //     password: document.querySelector("#password").value,
  //   };
  //   window.event.preventDefault();
  //   console.log(login_data);
  //   fetch("https://reqres.in/api/login", {
  //     method: "POST",
  //     headers: {
  //       "Content-Type": "application/json",
  //     },
  //     body: JSON.stringify(login_data),
  //   })
  //     .then((res) => {
  //       return res.json();
  //     })
  //     .then((res) => {
  //       console.log(res.token);
  //       localStorage.setItem("r_token", JSON.stringify(res.token));

  //       if (res.token === "QpwL5tke4Pnpja7X4") {
  //         window.location.href = "./resturant/resturant.html";
  //       }
  //     })
  //     .catch((err) => {
  //       console.log(err);
  //     });
  // };

  let user_data = JSON.parse(localStorage.getItem("user_data")) || [];

  const login = () => {
    window.event.preventDefault();
    const sigup_data = {
      username: document.querySelector("#user").value,
      email: document.querySelector("#email").value,
      password: document.querySelector("#password").value,
      time: new Date(),
    };

    user_data.push(sigup_data);
    localStorage.setItem("user_data", JSON.stringify(user_data));
    window.location.href = "./login/login.html";
    console.log(login_data);
  };
</script>
